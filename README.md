In response to [Make It Real Top-v25](https://github.com/makeitrealcamp/top-v25) backend assessment.

# FAVS API

_Favs_ is a new company that aims to provide a better way to organize your favorite things: music, clothes, courses, etc., all in one place.

## Table of contents

- [Endpoints](#endpoints)
  - [Create Users](#create-users)
  - [Users' Login](#users-login)
- [Lists](#lists)
  - [Create a list](#create-a-list)
  - [Consult a user's lists](#consult-a-users-lists)
  - [Consult a specific list](#consult-a-specific-list)
  - [Delete a specific list](#delete-a-specific-list)


## Create Users

To create a new user, send a POST http request to `/api/users` with the user's information in the following json structure:

```json
{
  "email": "user email",
  "password": "user password"
}
```

Password should contain at least a number and a capital letter. If the password does not comply with these requirements, server will return following message:

```json
{
  "message": "Password is not strong enough. Remember to include at least a capital letter and a number."
}
```

User's email should not be already included in the database. Otherwise, server will return an **error 500**.

## Users' Login

For users to login, send a POST http request to `/auth/local/login` with the user's information in the following json structure:

```json
{
  "email": "user email",
  "password": "user password"
}
```

If user is not registered in the database, server will return an error 404 with the following json message:

```json
{
  "message": "User not found"
}
```

If password is not the same as user registered, server will return an error 404 with the following json message:

```json
{
  "message": "Invalid password"
}
```

If login is successful, server will return a status 200 with the following json message:

```json
{
  "profile": {
    "_id": "user's unique id",
    "email": "user's email"
  },
  "userToken": "autogenerated user's access token"
}
```

## Lists

### Create a list

For users to create a new list, send a POST http request to `/api/favs` with the list's name in the following json structure:

```json
{
  "name": "list name"
}
```
Remember that only users who have logged in can create their own lists. That is why you must include the [token provided on the login](#users-login) in the request headers. If token is not included, or is not correct, server will send an error message as follow:
```json
{
    "message": "invalid user token"
}
```

If creation is successful, server will return a status 200 with the following json message:

```json
{
  "name": "list name",
  "items": [],
  "_id": "list id",
  "createdAt": "creation date",
  "updatedAt": "creation date",
  "__v": 0
}
```
New list is automatically added to the user's lists.

### Consult a user's lists

For users to consult their lists, send a GET http request to `/api/favs`.

Only users who have logged in can consult their own lists. That is why you must include the [token provided on the login](#users-login) in the request headers.

If the user is verified and has lists, server will return a status 200 with the following json message:

```json
[
    {
        "_id": "list 1 id",
        "name": "list 1 name",
        "items": [],
        "createdAt": "list 1 creation date",
        "updatedAt": "list 1 update date",
        "__v": 0
    },
    {
        "_id": "list 2 id",
        "name": "list 2 name",
        "items": [],
        "createdAt": "list 2 creation date",
        "updatedAt": "list 2 update date",
        "__v": 0
    }
    ...
]
```
Otherwise, if user doesn't have any list, json response will be an empty array:

```json
[]
```
### Consult a specific list

For users to consult a specific list, send a GET http request to `/api/favs/<id>`. Replace `<id>` with the id of the specific list.

Only users who have logged in can consult their own lists. That is why you must include the [token provided on the login](#users-login) in the request headers.

If the user is verified and has the list in their data, server will return a status 200 with the following json message:

```json
{
    "_id": "list id",
    "name": "list name",
    "items": [],
    "createdAt": "creation date",
        "updatedAt": "update date",
    "__v": 0
}
```
If a user attempts to consult a list is not theirs, server will return a status 401 with the following json message:
```json
{
    "message": "user is not authorized to consult this list"
}
```
### Delete a specific list

For users to delete a specific list, send a DELETE http request to `/api/favs/<id>`. Replace `<id>` with the id of the specific list.

Only users who have logged in can consult their own lists. That is why you must include the [token provided on the login](#users-login) in the request headers.

If the user is verified and has the list in their data, server will return a status 200 with the following json message:

```json
{
    "message": "List has been removed."
}
```
If a user attempts to delete a list is not theirs, server will return a status 401 with the following json message:
```json
{
    "message": "user is not authorized to delete this list"
}
```
